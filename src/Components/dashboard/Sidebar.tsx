"use client";
import { usePathname, useRouter } from "next/navigation";
import React,{useEffect} from "react";
import { useSelector } from "react-redux";
import ToasterYesorNo, { toastOption } from "../Toaster/ToasterYesorNo";

function Sidebar() {
  const {socket,user} = useSelector((state:any)=>state?.auth)
  const router = usePathname();
  const navigate = useRouter()
  useEffect(()=>{
    socket.emit("userExited",user?.email)
  },[socket,user])

  useEffect(()=>{
    socket.on("challenge",({link,user}:{link:string,user:string})=>{
      toastOption.showToast("Your Challenged By "+user,"green",()=>{
        navigate.push(link)

      })
    })
    return ()=>{
      socket.off("challenge",({link,user}:{link:string,user:string})=>{
        toastOption.showToast("Your Challenged By "+user,"green",()=>{
          navigate.push(link)
  
        })
      })
    }
  },[navigate, socket])
  return (
    <div className="fixed top-16 left-3 z-10 rounded-xl bg-none flex flex-col border-[#2D2F39] border justify-between h-[calc(100vh-5rem)] w-11 ">
     <ToasterYesorNo/>
      <div className="w-full h-10 rounded-[0.75rem_0.75rem_0px_0px] bg-slate-500"></div>
      <div className="h-[calc(100%-5rem)] flex flex-col items-center pt-3">
        <svg
          width={33}
          height={30}
          onClick={()=>navigate.push("/dashboard")}

          className={
            router === "/dashboard"
              ? "bg-[#2D2F39] rounded"
              : "bg-none hover:bg-[#383b46] duration-150 rounded"
          }
          viewBox="0 0 44 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M22 12.2314C21.2386 12.2314 20.4917 12.4401 19.8406 12.8347L15.6739 15.3597C15.0612 15.731 14.5546 16.254 14.2029 16.8782C13.8513 17.5024 13.6666 18.2067 13.6666 18.9232V24.1665C13.6666 25.2716 14.1056 26.3314 14.887 27.1128C15.6684 27.8942 16.7282 28.3332 17.8333 28.3332H26.1666C27.2717 28.3332 28.3315 27.8942 29.1129 27.1128C29.8943 26.3314 30.3333 25.2716 30.3333 24.1665V18.9223C30.3331 18.2061 30.1483 17.5018 29.7967 16.8777C29.4451 16.2537 28.9386 15.7309 28.326 15.3597L24.1593 12.8347C23.5082 12.4401 22.7613 12.2314 22 12.2314ZM20.7043 14.26C21.095 14.0233 21.5431 13.8981 22 13.8981C22.4568 13.8981 22.9049 14.0233 23.2956 14.26L27.4622 16.785C27.8298 17.0078 28.1337 17.3215 28.3447 17.6959C28.5556 18.0702 28.6665 18.4927 28.6666 18.9223V24.1665C28.6666 24.8296 28.4032 25.4654 27.9344 25.9343C27.4655 26.4031 26.8297 26.6665 26.1666 26.6665H25.3333V24.1665C25.3333 23.2825 24.9821 22.4346 24.357 21.8095C23.7319 21.1844 22.884 20.8332 22 20.8332C21.1159 20.8332 20.2681 21.1844 19.6429 21.8095C19.0178 22.4346 18.6666 23.2825 18.6666 24.1665V26.6665H17.8333C17.1703 26.6665 16.5344 26.4031 16.0655 25.9343C15.5967 25.4654 15.3333 24.8296 15.3333 24.1665V18.9232C15.3333 18.4933 15.4441 18.0707 15.6551 17.6962C15.8661 17.3216 16.17 17.0078 16.5377 16.785L20.7043 14.26ZM23.1785 22.988C23.491 23.3006 23.6666 23.7245 23.6666 24.1665V26.6665H20.3333V24.1665C20.3333 23.7245 20.5089 23.3006 20.8214 22.988C21.134 22.6754 21.5579 22.4999 22 22.4999C22.442 22.4999 22.8659 22.6754 23.1785 22.988Z"
            fill="#757575"
          />
        </svg>
        <svg
          style={{ color: "rgb(117, 117, 117)" }}
          className={router==="/matchs" ? "bg-[#2D2F39] rounded":"bg-none hover:bg-[#383b46] duration-150 rounded"}
          onClick={()=>navigate.push("/matchs")}
          xmlns="http://www.w3.org/2000/svg"
          width={33}
          height={30}
          fill="currentColor"
          viewBox="0 -4 16 25"
        >
          {" "}
          <path
            d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"
            fill="#757575"
          />{" "}
        </svg>
        <svg
          width={33}
          height={30}
          onClick={()=>navigate.push("/rank")}
          className={
            router === "/rank"
              ? "bg-[#2D2F39] rounded"
              : "bg-none hover:bg-[#383b46] duration-150 rounded"
          }
          viewBox="0 0 44 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M25 11.6666C24.6464 11.6666 24.3072 11.8071 24.0572 12.0572C23.8071 12.3072 23.6667 12.6463 23.6667 13V16.6666H20C19.6464 16.6666 19.3072 16.8071 19.0572 17.0571C18.8071 17.3072 18.6667 17.6463 18.6667 18V22.5H15C14.6464 22.5 14.3072 22.6404 14.0572 22.8905C13.8071 23.1405 13.6667 23.4797 13.6667 23.8333V27C13.6667 27.3536 13.8071 27.6927 14.0572 27.9428C14.3072 28.1928 14.6464 28.3333 15 28.3333H29C29.3536 28.3333 29.6927 28.1928 29.9428 27.9428C30.1928 27.6927 30.3333 27.3536 30.3333 27V13C30.3333 12.6463 30.1928 12.3072 29.9428 12.0572C29.6927 11.8071 29.3536 11.6666 29 11.6666H25ZM20.3333 18.3333H23.6667V26.6666H20.3333V18.3333ZM28.6667 26.6666H25.3333V13.3333H28.6667V26.6666ZM18.6667 24.1666V26.6666H15.3333V24.1666H18.6667Z"
            fill="#757575"
          />
        </svg>
        <h5 className="text-[7px] mt-3">SETTINGS</h5>
        
        <svg
          width={33}
          height={30}
          onClick={()=>navigate.push("/settings")}
          className={
            router === "/settings"
              ? "bg-[#2D2F39] rounded"
              : "bg-none hover:bg-[#383b46] duration-150 rounded"
          }
          viewBox="0 0 44 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_3_174)">
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M22 16.6666C21.116 16.6666 20.2681 17.0178 19.643 17.6429C19.0179 18.268 18.6667 19.1159 18.6667 19.9999C18.6667 20.884 19.0179 21.7318 19.643 22.3569C20.2681 22.9821 21.116 23.3333 22 23.3333C22.8841 23.3333 23.7319 22.9821 24.357 22.3569C24.9822 21.7318 25.3333 20.884 25.3333 19.9999C25.3333 19.1159 24.9822 18.268 24.357 17.6429C23.7319 17.0178 22.8841 16.6666 22 16.6666ZM20.8215 18.8214C21.1341 18.5088 21.558 18.3333 22 18.3333C22.442 18.3333 22.866 18.5088 23.1785 18.8214C23.4911 19.134 23.6667 19.5579 23.6667 19.9999C23.6667 20.4419 23.4911 20.8659 23.1785 21.1784C22.866 21.491 22.442 21.6666 22 21.6666C21.558 21.6666 21.1341 21.491 20.8215 21.1784C20.5089 20.8659 20.3333 20.4419 20.3333 19.9999C20.3333 19.5579 20.5089 19.134 20.8215 18.8214Z"
              fill="#757575"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M21.1508 10.8333C20.7723 10.8333 20.4413 11.0884 20.345 11.4545L19.9227 13.0588L18.581 13.6244L17.5539 12.7107C17.2242 12.4173 16.7229 12.4319 16.4108 12.744L14.7441 14.4107C14.4422 14.7126 14.4173 15.1939 14.6865 15.5253L15.5866 16.6335L15.0346 17.9915L13.4772 18.3551C13.1001 18.4431 12.8333 18.7793 12.8333 19.1666V20.8333C12.8333 21.209 13.0848 21.5383 13.4474 21.6372L15.0571 22.0763L15.6242 23.4217L14.7114 24.4453C14.4174 24.775 14.4317 25.2768 14.7441 25.5892L16.4108 27.2558C16.7131 27.5582 17.1952 27.5826 17.5265 27.3125L18.6344 26.4094L19.959 26.9542L20.3587 28.5373C20.4521 28.9073 20.785 29.1666 21.1667 29.1666H22.8333C23.2148 29.1666 23.5476 28.9075 23.6412 28.5377L24.042 26.954L25.4108 26.387C25.5486 26.5025 25.7066 26.6382 25.8638 26.7751C26.02 26.9111 26.1652 27.0393 26.2715 27.1336C26.3245 27.1806 26.3678 27.2192 26.3976 27.2458L26.4429 27.2863C26.7724 27.582 27.2762 27.5689 27.5893 27.2558L29.2559 25.5892C29.5626 25.2825 29.5828 24.7918 29.3023 24.4609L28.3945 23.3905L28.9562 22.0338L30.5429 21.6215C30.9102 21.526 31.1667 21.1944 31.1667 20.8149V19.1666C31.1667 18.7855 30.9081 18.4529 30.5388 18.359L28.9619 17.9578L28.4016 16.6044L29.3031 15.5379C29.5828 15.207 29.5623 14.717 29.2559 14.4107L27.5893 12.744C27.2817 12.4364 26.7892 12.4171 26.4586 12.6998L25.3999 13.6046L23.9988 13.0286L23.5851 11.4547C23.4889 11.0885 23.1578 10.8333 22.7792 10.8333H21.1508ZM27.5346 24.9534L26.9645 25.5236L26.9583 25.5181C26.6505 25.2501 26.2541 24.911 26.0305 24.7512C25.7965 24.5839 25.4927 24.5491 25.227 24.6592L23.0178 25.5742C22.7746 25.6749 22.5934 25.8845 22.5288 26.1397L22.1846 27.4999H21.8157L21.4721 26.1392C21.4075 25.8832 21.2254 25.673 20.9812 25.5726L18.8095 24.6792C18.5268 24.5629 18.203 24.6108 17.966 24.804L17.057 25.545L16.4791 24.9672L17.2186 24.1379C17.4327 23.8978 17.4895 23.556 17.3646 23.2595L16.4354 21.0554C16.336 20.8196 16.1337 20.6425 15.8868 20.5751L14.5 20.1968V19.8278L15.8336 19.5164C16.0971 19.4549 16.3143 19.2693 16.4162 19.0187L17.3162 16.8045C17.4306 16.5229 17.3827 16.2013 17.191 15.9654L16.4539 15.0578L17.0334 14.4784L17.8661 15.2192C18.1062 15.4328 18.4476 15.4893 18.7437 15.3645L20.9479 14.4353C21.1861 14.3349 21.3642 14.1296 21.4301 13.8795L21.7932 12.4999H22.1366L22.4924 13.8534C22.5588 14.1061 22.7398 14.313 22.9815 14.4123L25.2373 15.3398C25.5265 15.4587 25.8579 15.4057 26.0956 15.2025L26.9557 14.4674L27.5355 15.0473L26.8011 15.9161C26.5998 16.1542 26.5483 16.4848 26.6675 16.7728L27.5817 18.9812C27.6822 19.224 27.8915 19.4052 28.1462 19.47L29.5 19.8145V20.1705L28.1354 20.525C27.8825 20.5908 27.675 20.7713 27.5751 21.0128L26.6601 23.2228C26.5406 23.5113 26.5925 23.8424 26.7944 24.0806L27.5346 24.9534Z"
              fill="#757575"
            />
          </g>
          <defs>
            <clipPath id="clip0_3_174">
              <rect
                width={20}
                height={20}
                fill="white"
                transform="translate(12 10)"
              />
            </clipPath>
          </defs>
        </svg>
      </div>
      <div className="w-full h-10 self-end rounded-[0px_0px_0.75rem_0.75rem] bg-slate-500"></div>
    </div>
  );
}

export default Sidebar;
